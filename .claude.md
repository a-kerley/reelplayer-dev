# Claude Project Cleanup & Refactor Guidelines

These are the standing cleanup and refactor instructions for this project.

When instructed to “apply the `.cleanup` instructions” or “refactor `x feature`”, follow these rules exactly.

---

## 🧩 Project Context

This is a **web project** with **embeddable functionality**, built primarily using **JavaScript and CSS**.  
It may include front-end modules, initialisation scripts, styling for embeds, and utility code that integrates into third-party sites.

---

## ⚙️ Cleanup & Refactor Objectives

When applying the `.cleanup` instructions, Claude should:

1. **Evaluate the Feature**
   - Understand the purpose and behaviour of the feature or component.
   - Ensure all functionality and external behaviour remain *identical* after cleanup.

2. **Code Cleanup**
   - Remove unused imports, duplicate logic, redundant variables, and commented-out code.
   - Simplify complex or deeply nested logic without changing results.
   - Consolidate repeated styles or inline CSS into reusable classes or modules.

3. **Modularisation**
   - Split large files or monolithic scripts into smaller, named modules.
   - Use clear folder conventions, e.g.:
     ```
     /src/embed/
     /src/ui/
     /src/utils/
     /styles/
     ```
   - Extract reusable logic into utility functions or helper files.

4. **Readability & Maintainability**
   - Use consistent, descriptive names for functions, classes, and files.
   - Ensure consistent formatting, indentation, and brace placement.
   - Add brief, meaningful comments where the purpose might not be obvious.
   - Follow idiomatic modern JavaScript (ES6+) conventions.

5. **Optimisation**
   - Look for safe performance improvements:
     - Minimise redundant DOM operations.
     - Cache query results or computed values.
     - Debounce or throttle heavy event listeners.
   - Optimise CSS by merging duplicate selectors or redundant declarations.
   - Maintain async safety and browser compatibility.

6. **Project Structure**
   - Reorganise files and folders logically for clarity.
   - Rename files or modules to match their function (e.g. `embed-core.js`, `embed-utils.js`, `player.css`).
   - Ensure a consistent entry point (`main.js`, `index.js`, etc.).

7. **Debug & Logging**
   - Remove stray debugging or console output.
   - Keep meaningful logging or error handling intact.
   - Consolidate repetitive debug statements.

8. **Preserve Functionality**
   - Never remove, break, or alter intended behaviour.
   - All embeds, UI components, and integration logic must continue to operate as before.

---

## 🪶 Style & Best Practices

- Use `const` / `let` over `var`.
- Prefer arrow functions, template literals, and early returns.
- Ensure CSS follows a modular or BEM-style naming approach.
- Prioritise readability and maintainability over micro-optimisation.
- Document modules or exports if they are reused across features.

---

## 🧾 Deliverables

When cleanup is complete:
- Provide clean, modular, and functional code.
- Optionally include a short summary of what was improved and why.

---

## 🪄 Example Invocation

When working in this project, you can say:
> “Apply the `.cleanup` instructions to the **embed initialiser**.”  
> “Apply the `.cleanup` instructions to **waveform player**.”  
> “Apply the `.cleanup` instructions to **CSS overlays**.”

Claude will then follow these guidelines to refactor the relevant files safely and consistently.